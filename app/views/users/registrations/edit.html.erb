<div class="main-body">

  <div class="row gutters-sm">
    <div class="col-md-4 mb-3">
      <div class="card">
        <div class="card-body">
          <div class="d-flex flex-column align-items-center text-center">
            <%= image_tag 'profile_icon.png', alt: "user", class: "rounded-circle", width: "150px"%>
            <div class="mt-3">
              <h4><%= @current_user.full_name %></h4>
              <p class="text-dark mb-1">Tester, Manager</p>
              <p class="text-muted font-size-sm"><%= @current_user.email %></p>
              <button class="btn btn-primary">Follow</button>
              <button class="btn btn-outline-primary">Message</button>
            </div>
          </div>
        </div>
      </div>
      <div class="card mt-3">
        <canvas id="myChart" width="600" height="400"></canvas>
      </div>
    </div>
    <div class="col-md-8">
      <div class="card mb-3">
        <div class="card-body">


          <%= form_for(resource, as: resource_name, url: registration_path(resource_name), html: { method: :put}) do |f| %>
            <h2 class="text-center"><%= I18n.t('devise.registrations.user_profile') %></h2>

            <div class="field">
              <%= f.label :first_name %><br />
              <%= f.text_field :first_name, autofocus: true, autocomplete: "first_name", class: "form-control" %>
            </div><br>

            <%# if devise_mapping.confirmable? && resource.pending_reconfirmation? %>
            <!--                <div>Currently waiting confirmation for: <%#= resource.unconfirmed_email %></div>-->
            <%# end %>

            <div class="field">
              <%= f.label :middle_name %><br />
              <%= f.text_field :middle_name, autofocus: true, autocomplete: "middle_name", class: "form-control" %>
            </div><br>


            <div class="field">
              <%= f.label :last_name %><br />
              <%= f.text_field :last_name, autofocus: true, autocomplete: "last_name", class: "form-control" %>
            </div><br>


            <div class="field">
              <%= f.label :email %><br />
              <%= f.email_field :email, autofocus: true, autocomplete: "email", class: "form-control" %>
            </div><br>


            <div class="field">
              <%= f.label :phone %><br />
              <%= f.phone_field :phone, autofocus: true, autocomplete: "phone", class: "form-control" %>
            </div><br>


<!--            <div class="field">-->
<!--              <%#= f.label :current_password %><br />-->
              <%#=  f.password_field :current_password, autocomplete: "current-password", class: "form-control" %>
<!--            </div><br>-->

            <div class="actions">
              <%= f.submit I18n.t('devise.registrations.update_profile'), data: {disable_with: I18n.t('please_wait')}, class: "btn btn-lg btn-primary" %>
              <%= link_to I18n.t('reset_form'), edit_user_registration_path, data: {disable_with: I18n.t('please_wait')}, class: "btn btn-lg btn-primary" %>
            </div>
          <% end %>

          <% if false %>
            <h3>Cancel my account</h3>

            <p>Unhappy? <%= button_to "Cancel my account", registration_path(resource_name), data: { confirm: "Are you sure?" }, method: :delete %></p>

            <%= link_to "Back", :back %>
          <% end %>

        </div>
      </div>

      <!--        <div class="row gutters-sm">-->
      <!--          <div class="col-sm-6 mb-3">-->
      <!--            <div class="card h-100">-->
      <!--              <div class="card-body">-->
      <!--                <h6 class="d-flex align-items-center mb-3"><i class="material-icons text-info mr-2">assignment</i>Project Status</h6>-->
      <!--                <small>Web Design</small>-->
      <!--                <div class="progress mb-3" style="height: 5px">-->
      <!--                  <div class="progress-bar bg-primary" role="progressbar" style="width: 80%" aria-valuenow="80" aria-valuemin="0" aria-valuemax="100"></div>-->
      <!--                </div>-->
      <!--                <small>Website Markup</small>-->
      <!--                <div class="progress mb-3" style="height: 5px">-->
      <!--                  <div class="progress-bar bg-primary" role="progressbar" style="width: 72%" aria-valuenow="72" aria-valuemin="0" aria-valuemax="100"></div>-->
      <!--                </div>-->
      <!--                <small>One Page</small>-->
      <!--                <div class="progress mb-3" style="height: 5px">-->
      <!--                  <div class="progress-bar bg-primary" role="progressbar" style="width: 89%" aria-valuenow="89" aria-valuemin="0" aria-valuemax="100"></div>-->
      <!--                </div>-->
      <!--                <small>Mobile Template</small>-->
      <!--                <div class="progress mb-3" style="height: 5px">-->
      <!--                  <div class="progress-bar bg-primary" role="progressbar" style="width: 55%" aria-valuenow="55" aria-valuemin="0" aria-valuemax="100"></div>-->
      <!--                </div>-->
      <!--                <small>Backend API</small>-->
      <!--                <div class="progress mb-3" style="height: 5px">-->
      <!--                  <div class="progress-bar bg-primary" role="progressbar" style="width: 66%" aria-valuenow="66" aria-valuemin="0" aria-valuemax="100"></div>-->
      <!--                </div>-->
      <!--              </div>-->
      <!--            </div>-->
      <!--          </div>-->
      <!--          <div class="col-sm-6 mb-3">-->
      <!--            <div class="card h-100">-->
      <!--              <div class="card-body">-->
      <!--                <h6 class="d-flex align-items-center mb-3"><i class="material-icons text-info mr-2">assignment</i>Project Status</h6>-->
      <!--                <small>Web Design</small>-->
      <!--                <div class="progress mb-3" style="height: 5px">-->
      <!--                  <div class="progress-bar bg-primary" role="progressbar" style="width: 80%" aria-valuenow="80" aria-valuemin="0" aria-valuemax="100"></div>-->
      <!--                </div>-->
      <!--                <small>Website Markup</small>-->
      <!--                <div class="progress mb-3" style="height: 5px">-->
      <!--                  <div class="progress-bar bg-primary" role="progressbar" style="width: 72%" aria-valuenow="72" aria-valuemin="0" aria-valuemax="100"></div>-->
      <!--                </div>-->
      <!--                <small>One Page</small>-->
      <!--                <div class="progress mb-3" style="height: 5px">-->
      <!--                  <div class="progress-bar bg-primary" role="progressbar" style="width: 89%" aria-valuenow="89" aria-valuemin="0" aria-valuemax="100"></div>-->
      <!--                </div>-->
      <!--                <small>Mobile Template</small>-->
      <!--                <div class="progress mb-3" style="height: 5px">-->
      <!--                  <div class="progress-bar bg-primary" role="progressbar" style="width: 55%" aria-valuenow="55" aria-valuemin="0" aria-valuemax="100"></div>-->
      <!--                </div>-->
      <!--                <small>Backend API</small>-->
      <!--                <div class="progress mb-3" style="height: 5px">-->
      <!--                  <div class="progress-bar bg-primary" role="progressbar" style="width: 66%" aria-valuenow="66" aria-valuemin="0" aria-valuemax="100"></div>-->
      <!--                </div>-->
      <!--              </div>-->
      <!--            </div>-->
      <!--          </div>-->
      <!--        </div>-->
    </div>
  </div>
</div>

<script>
    Chart.defaults.global.legend.display = true;
    Chart.defaults.global.defaultFontFamily = "Open Sans, sans-serif";
    Chart.defaults.global.defaultFontSize = 12;
    var ctx = document.getElementById('myChart').getContext('2d');
    var myChart = new Chart(ctx, {
        type: 'pie',
        data: {
            labels: ['<%= I18n.t('total_tasks') %>', '<%= I18n.t('completed_tasks') %>', '<%= I18n.t('pending_tasks') %>'],
            datasets: [{
                data: [22, 19, 3],
                backgroundColor: [
                    'rgba(54, 162, 235, 0.2)',
                    'rgba(1, 145, 9, 0.5)',
                    'rgba(227, 5, 23, 0.5)',
                ],
                borderColor: [
                    'rgba(54, 162, 235, 1)',
                    'rgba(1, 145, 9, 1)',
                    'rgba(227, 5, 23, 1)',
                ],
                borderWidth: 1
            }]
        },
        options: {
            cutoutPercentage: 50,
            responsive: true,
            title: {
                display: true,
                text: '<%= I18n.t('profile_updates') %>'
            }

        }
    });

    $(document).ready(function(){
        // Add down arrow icon for collapse element which is open by default
        $(".collapse.show").each(function(){
            $(this).prev(".card-header").find(".fa").addClass("fa-angle-down").removeClass("fa-angle-right");
        });

        // Toggle right and down arrow icon on show hide of collapse element
        $(".collapse").on('show.bs.collapse', function(){
            $(this).prev(".card-header").find(".fa").removeClass("fa-angle-right").addClass("fa-angle-down");
        }).on('hide.bs.collapse', function(){
            $(this).prev(".card-header").find(".fa").removeClass("fa-angle-down").addClass("fa-angle-right");
        });
    });
</script>



<%#= form_for(resource, as: resource_name, url: registration_path(resource_name), html: { method: :put, class: "align_to_page_center form-sign-up" }) do |f| %>
<!--  <h2 class="text-center"><%#= I18n.t('devise.registrations.edit_user_profile') %></h2>-->

<!--  <div class="field">-->
<!--    <%#= f.label :email %><br />-->
    <%#= f.email_field :email, autofocus: true, autocomplete: "email", class: "form-control" %>
<!--  </div>-->

  <%# if devise_mapping.confirmable? && resource.pending_reconfirmation? %>
<!--    <div>Currently waiting confirmation for: <%#= resource.unconfirmed_email %></div>-->
  <%# end %>

<!--  <div class="field">-->
<!--    <%#= f.label :password %> <i>(leave blank if you don't want to change it)</i><br />-->
    <%#= f.password_field :password, autocomplete: "new-password", class: "form-control" %>
    <%# if @minimum_password_length %>
<!--      <br />-->
<!--      <em><%#= @minimum_password_length %> characters minimum</em>-->
    <%# end %>
<!--  </div>-->

<!--  <div class="field">-->
<!--    <%#= f.label :password_confirmation %><br />-->
    <%#= f.password_field :password_confirmation, autocomplete: "new-password", class: "form-control" %>
<!--  </div>-->

<!--  <div class="field">-->
<!--    <%#= f.label :current_password %> <i>(we need your current password to confirm your changes)</i><br />-->
    <%#= f.password_field :current_password, autocomplete: "current-password", class: "form-control" %>
<!--  </div>-->

<!--  <br>-->

<!--  <div class="actions">-->
    <%#= f.submit I18n.t('devise.registrations.update_profile'), class: "btn btn-lg btn-primary btn-block" %>
<!--  </div>-->
<%# end %>

<%# if false %>
<!--  <h3>Cancel my account</h3>-->

<!--  <p>Unhappy? <%#= button_to "Cancel my account", registration_path(resource_name), data: { confirm: "Are you sure?" }, method: :delete %></p>-->

  <%#= link_to "Back", :back %>
<%# end %>
